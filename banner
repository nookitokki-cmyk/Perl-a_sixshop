<style>
/* ===== í’€ìŠ¤í¬ë¦° ìŠ¬ë¼ì´ë” ì»¨í…Œì´ë„ˆ ===== */
.bm-fs-slider {
  position: relative;
  width: 100%;
  height: {{property.desktopHeight}}vh;
  overflow: hidden;
  font-family: var(--font-family-body);
}

.bm-fs-slider__track {
  position: relative;
  width: 100%;
  height: 100%;
}

/* ===== ìŠ¬ë¼ì´ë“œ ì•„ì´í…œ ===== */
.bm-fs-slider__item {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  opacity: 0;
  transition: opacity {{property.transitionDuration}}ms ease-in-out;
  z-index: 1;
}

.bm-fs-slider__item.active {
  opacity: 1;
  z-index: 2;
}

/* ===== ë¯¸ë””ì–´ ===== */
.bm-fs-slider__media {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  object-fit: cover;
}

/* ===== ì˜¤ë²„ë ˆì´ ===== */
.bm-fs-slider__overlay {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 1;
}

/* ===== ì½˜í…ì¸  ===== */
.bm-fs-slider__content {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  z-index: 2;
  padding: 40px;
  max-width: 1200px;
  width: 100%;
  box-sizing: border-box;
  display: flex;
  flex-direction: column;
}

/* ===== ìŠ¬ë¼ì´ë“œë³„ ì½˜í…ì¸  ìœ„ì¹˜Â·ì •ë ¬Â·ìƒ‰ìƒ ===== */
{{#each property.slides}}
.bm-fs-slider__content--{{@index}} {
  color: {{textColor}};
  text-align: {{textAlign}};

  {{#if (eq contentPosition "left")}}
  left: 0;
  align-items: flex-start;
  {{/if}}
  {{#if (eq contentPosition "center")}}
  left: 50%;
  transform: translate(-50%, -50%);
  align-items: center;
  {{/if}}
  {{#if (eq contentPosition "right")}}
  right: 0;
  align-items: flex-end;
  {{/if}}
}

.bm-fs-slider__overlay--{{@index}} {
  background-color: {{overlayColor}};
  opacity: {{divide overlayOpacity 100}};
}

.bm-fs-slider__btn--{{@index}} {
  display: inline-block;
  padding: 12px 32px;
  background-color: {{buttonBgColor}};
  color: {{buttonTextColor}};
  border: none;
  border-radius: {{buttonBorderRadius}}px;
  font-size: {{btnPcSize}}px;
  font-weight: 600;
  cursor: pointer;
  text-decoration: none;
  transition: all 0.3s ease;
}

.bm-fs-slider__btn--{{@index}}:hover {
  background-color: {{buttonHoverBgColor}};
  color: {{buttonHoverTextColor}};
}
{{/each}}

/* ===== íƒ€ì´í‹€ (RICH_TEXT) ===== */
.bm-fs-slider__title {
  font-family: var(--font-family-heading);
  margin: 0 0 16px 0;
  line-height: 1.2;
}

.bm-fs-slider__title h1,
.bm-fs-slider__title h2,
.bm-fs-slider__title h3,
.bm-fs-slider__title h4,
.bm-fs-slider__title h5,
.bm-fs-slider__title h6 {
  font-family: var(--font-family-heading);
  font-weight: var(--font-weight-heading);
  margin: 0;
  line-height: 1.2;
}

.bm-fs-slider__title h1 { font-size: 48px; }
.bm-fs-slider__title h2 { font-size: 40px; }
.bm-fs-slider__title h3 { font-size: 32px; }

.bm-fs-slider__title p { margin: 0; }
.bm-fs-slider__title strong { font-weight: 700; }
.bm-fs-slider__title em,
.bm-fs-slider__title i { font-style: italic; }

/* ===== ì„¤ëª… (RICH_TEXT) ===== */
.bm-fs-slider__desc {
  margin: 0 0 24px 0;
  line-height: 1.6;
  font-size: 18px;
}

.bm-fs-slider__desc p { margin: 0 0 12px 0; }
.bm-fs-slider__desc p:last-child { margin-bottom: 0; }
.bm-fs-slider__desc strong { font-weight: 700; }
.bm-fs-slider__desc em,
.bm-fs-slider__desc i { font-style: italic; }

/* ===== ì¸ë””ì¼€ì´í„° ===== */
.bm-fs-slider__indicators {
  position: absolute;
  bottom: 30px;
  left: 50%;
  transform: translateX(-50%);
  display: flex;
  gap: 12px;
  z-index: 10;
}

.bm-fs-slider__indicator {
  width: 60px;
  height: {{property.indicatorHeight}}px;
  background-color: {{property.indicatorColor}};
  opacity: {{divide property.indicatorOpacity 100}};
  cursor: pointer;
  transition: all 0.3s ease;
  border: none;
  padding: 0;
}

.bm-fs-slider__indicator.active {
  background-color: {{property.indicatorActiveColor}};
  opacity: 1;
}

.bm-fs-slider__indicator:hover {
  opacity: {{divide (add property.indicatorOpacity 20) 100}};
}

/* ===== ëª¨ë°”ì¼ ë°˜ì‘í˜• ===== */
@media (max-width: 768px) {
  .bm-fs-slider {
    height: {{property.mobileHeight}}vh;
  }

  .bm-fs-slider__content {
    padding: 20px;
  }

  .bm-fs-slider__title h1 { font-size: 32px; }
  .bm-fs-slider__title h2 { font-size: 28px; }
  .bm-fs-slider__title h3 { font-size: 24px; }

  .bm-fs-slider__desc {
    font-size: 16px;
  }

  {{#each property.slides}}
  .bm-fs-slider__btn--{{@index}} {
    padding: 10px 24px;
    font-size: {{btnMoSize}}px;
  }
  {{/each}}

  .bm-fs-slider__indicator {
    width: 40px;
  }

  .bm-fs-slider__indicators {
    bottom: 20px;
    gap: 8px;
  }
}
</style>

<template>
  <div class="bm-fs-slider">
    <div class="bm-fs-slider__track">
      {{#each property.slides}}
      <div class="bm-fs-slider__item" data-slide-index="{{@index}}">

        {{!-- ë¯¸ë””ì–´ --}}
        {{#if (eq mediaType "image")}}
          {{#if image}}
          <img src="{{image}}" alt="Slide {{add @index 1}}" class="bm-fs-slider__media">
          {{/if}}
        {{else}}
          {{#if video}}
          <video src="{{video}}" class="bm-fs-slider__media" autoplay loop muted playsinline></video>
          {{/if}}
        {{/if}}

        {{!-- ì˜¤ë²„ë ˆì´ --}}
        {{#if (eq useOverlay "on")}}
        <div class="bm-fs-slider__overlay bm-fs-slider__overlay--{{@index}}"></div>
        {{/if}}

        {{!-- ì½˜í…ì¸  --}}
        {{#if (eq showContent "on")}}
        <div class="bm-fs-slider__content bm-fs-slider__content--{{@index}}">
          <div class="bm-fs-slider__title">
            {{{title}}}
          </div>
          <div class="bm-fs-slider__desc">
            {{{description}}}
          </div>

          {{!-- ë²„íŠ¼ --}}
          {{#if (eq showButton "on")}}
            {{#if openInNewTab}}
            <a href="{{buttonLink.value}}" target="_blank" rel="noopener noreferrer" class="bm-fs-slider__btn--{{@index}}">
              {{buttonText}}
            </a>
            {{else}}
            <a href="{{buttonLink.value}}" class="bm-fs-slider__btn--{{@index}}">
              {{buttonText}}
            </a>
            {{/if}}
          {{/if}}
        </div>
        {{/if}}

      </div>
      {{/each}}
    </div>

    {{!-- ì¸ë””ì¼€ì´í„° --}}
    <div class="bm-fs-slider__indicators">
      {{#each property.slides}}
      <button class="bm-fs-slider__indicator" data-indicator-index="{{@index}}" aria-label="Slide {{add @index 1}}"></button>
      {{/each}}
    </div>
  </div>
</template>

<script>
var container = bm.container;
var context = bm.context;

var currentSlide = 0;
var autoplayTimer = null;
var isTransitioning = false;

/* ===== ì´ˆê¸°í™” ===== */
function initSlider() {
  var slides = container.querySelectorAll('.bm-fs-slider__item');
  var indicators = container.querySelectorAll('.bm-fs-slider__indicator');

  if (slides.length === 0) return;

  slides[0].classList.add('active');
  if (indicators[0]) {
    indicators[0].classList.add('active');
  }

  if (context.property.autoplay) {
    startAutoplay();
  }
}

/* ===== ìŠ¬ë¼ì´ë“œ ì´ë™ ===== */
function goToSlide(index) {
  if (isTransitioning) return;

  var slides = container.querySelectorAll('.bm-fs-slider__item');
  var indicators = container.querySelectorAll('.bm-fs-slider__indicator');

  if (index < 0 || index >= slides.length) return;
  if (index === currentSlide) return;

  isTransitioning = true;

  slides[currentSlide].classList.remove('active');
  if (indicators[currentSlide]) {
    indicators[currentSlide].classList.remove('active');
  }

  currentSlide = index;
  slides[currentSlide].classList.add('active');
  if (indicators[currentSlide]) {
    indicators[currentSlide].classList.add('active');
  }

  setTimeout(function() {
    isTransitioning = false;
  }, context.property.transitionDuration);

  if (context.property.autoplay) {
    stopAutoplay();
    startAutoplay();
  }
}

function nextSlide() {
  var slides = container.querySelectorAll('.bm-fs-slider__item');
  var nextIndex = (currentSlide + 1) % slides.length;
  goToSlide(nextIndex);
}

/* ===== ìë™ ì¬ìƒ ===== */
function startAutoplay() {
  stopAutoplay();
  autoplayTimer = setInterval(function() {
    nextSlide();
  }, context.property.autoplayInterval);
}

function stopAutoplay() {
  if (autoplayTimer) {
    clearInterval(autoplayTimer);
    autoplayTimer = null;
  }
}

/* ===== ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ ===== */
function handleClick(event) {
  var indicator = event.target.closest('.bm-fs-slider__indicator');
  if (!indicator) return;

  event.preventDefault();
  var index = parseInt(indicator.getAttribute('data-indicator-index'), 10);
  if (!isNaN(index)) {
    goToSlide(index);
  }
}

container.addEventListener('click', handleClick, true);

/* ===== ì´ˆê¸° ì‹¤í–‰ ===== */
initSlider();

/* ===== ì„¤ì • ë³€ê²½ ì‹œ ì¬ì´ˆê¸°í™” ===== */
bm.onContextChange = function() {
  stopAutoplay();
  currentSlide = 0;
  isTransitioning = false;

  var slides = container.querySelectorAll('.bm-fs-slider__item');
  var indicators = container.querySelectorAll('.bm-fs-slider__indicator');

  slides.forEach(function(slide, i) {
    slide.classList.remove('active');
    if (i === 0) slide.classList.add('active');
  });

  indicators.forEach(function(ind, i) {
    ind.classList.remove('active');
    if (i === 0) ind.classList.add('active');
  });

  if (context.property.autoplay) {
    startAutoplay();
  }
};

/* ===== ì •ë¦¬ ===== */
bm.onDestroy = function() {
  stopAutoplay();
  container.removeEventListener('click', handleClick, true);
};
</script>


{"settings":[{"type":"TITLE","content":"ëˆ„ë¼í† ë¼ ì „ë¬¸ ê°œë°œ ë¸”ë¡"},{"type":"DESCRIPTION","content":"ã€ ì•ˆë‚´ ã€‘\nì½”ë“œ ì—†ì´ ì§ì ‘ ìš´ì˜í•˜ì‹¤ ìˆ˜ ìˆë„ë¡\nì „ë¬¸ ê°œë°œìê°€ ê¸°íšÂ·ì„¤ê³„Â·êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.\nê°„ë‹¨í•œ ìˆ˜ì •ì€ ë¸”ë¡ AIë¥¼ í™œìš©í•˜ì‹œê³ ,\nê³ ë„í™”ëœ ì»¤ìŠ¤í…€ì´ í•„ìš”í•˜ì‹œë©´\nì „ë¬¸ê°€ì—ê²Œ ì˜ë¢°í•´ ì£¼ì„¸ìš”."},{"type":"TITLE","content":"ğŸ“‹ ìŠ¬ë¼ì´ë“œ ëª©ë¡"},{"type":"LIST","id":"slides","label":"ìŠ¬ë¼ì´ë“œ","maxCount":10,"settings":[{"type":"SELECT","id":"mediaType","label":"ë¯¸ë””ì–´ íƒ€ì…","options":[{"value":"image","label":"ì´ë¯¸ì§€"},{"value":"video","label":"ë¹„ë””ì˜¤"}],"default":"image"},{"type":"IMAGE_PICKER","id":"image","label":"ì´ë¯¸ì§€","isVisible":"property.slides[index].mediaType === 'image'"},{"type":"VIDEO_PICKER","id":"video","label":"ë¹„ë””ì˜¤","isVisible":"property.slides[index].mediaType === 'video'"},{"id":"showContent","label":"ì½˜í…ì¸  í‘œì‹œ","default":"on","type":"RADIO","options":[{"value":"on","label":"ì‚¬ìš©","icon":""},{"value":"off","label":"ë¯¸ì‚¬ìš©","icon":""}]},{"type":"RICH_TEXT","id":"title","label":"ì œëª©","default":"<h1>ìŠ¬ë¼ì´ë“œ ì œëª©</h1>","isVisible":"property.slides[index].showContent === 'on'"},{"type":"RICH_TEXT","id":"description","label":"ì„¤ëª…","default":"<p>ìŠ¬ë¼ì´ë“œ ì„¤ëª… í…ìŠ¤íŠ¸</p>","isVisible":"property.slides[index].showContent === 'on'"},{"id":"contentPosition","label":"ì½˜í…ì¸  ìœ„ì¹˜","default":"center","isVisible":"property.slides[index].showContent === 'on'","type":"RADIO","options":[{"value":"left","label":"","icon":"locationLeftMiddle"},{"value":"center","label":"","icon":"locationCenterMiddle"},{"value":"right","label":"","icon":"locationRightMiddle"}]},{"id":"textAlign","label":"í…ìŠ¤íŠ¸ ì •ë ¬","default":"center","isVisible":"property.slides[index].showContent === 'on'","type":"RADIO","options":[{"value":"left","label":"","icon":"textAlignmentLeft"},{"value":"center","label":"","icon":"textAlignmentCenter"},{"value":"right","label":"","icon":"textAlignmentRight"}]},{"type":"COLOR_PICKER","id":"textColor","label":"í…ìŠ¤íŠ¸ ìƒ‰ìƒ","default":"#FAF8F5","isVisible":"property.slides[index].showContent === 'on'"},{"id":"useOverlay","label":"ì˜¤ë²„ë ˆì´","default":"on","type":"RADIO","options":[{"value":"on","label":"ì‚¬ìš©","icon":""},{"value":"off","label":"ë¯¸ì‚¬ìš©","icon":""}]},{"type":"COLOR_PICKER","id":"overlayColor","label":"â†³ ì˜¤ë²„ë ˆì´ ìƒ‰ìƒ","default":"#3B2E2A","isVisible":"property.slides[index].useOverlay === 'on'"},{"type":"RANGE","id":"overlayOpacity","label":"â†³ ì˜¤ë²„ë ˆì´ íˆ¬ëª…ë„","min":0,"max":100,"step":5,"unit":"%","default":30,"isVisible":"property.slides[index].useOverlay === 'on'"},{"id":"showButton","label":"ë²„íŠ¼","default":"off","isVisible":"property.slides[index].showContent === 'on'","type":"RADIO","options":[{"value":"on","label":"ì‚¬ìš©","icon":""},{"value":"off","label":"ë¯¸ì‚¬ìš©","icon":""}]},{"type":"TEXT","id":"buttonText","label":"â†³ ë²„íŠ¼ í…ìŠ¤íŠ¸","default":"ìì„¸íˆ ë³´ê¸°","isVisible":"property.slides[index].showButton === 'on'"},{"type":"LINK","id":"buttonLink","label":"â†³ ë²„íŠ¼ ë§í¬","isVisible":"property.slides[index].showButton === 'on'"},{"type":"CHECKBOX","id":"openInNewTab","label":"â†³ ìƒˆ íƒ­ì—ì„œ ì—´ê¸°","default":false,"isVisible":"property.slides[index].showButton === 'on'"},{"type":"COLOR_PICKER","id":"buttonBgColor","label":"â†³ ë²„íŠ¼ ë°°ê²½ìƒ‰","default":"#FAF8F5","isVisible":"property.slides[index].showButton === 'on'"},{"type":"COLOR_PICKER","id":"buttonTextColor","label":"â†³ ë²„íŠ¼ í…ìŠ¤íŠ¸ ìƒ‰ìƒ","default":"#3B2E2A","isVisible":"property.slides[index].showButton === 'on'"},{"type":"COLOR_PICKER","id":"buttonHoverBgColor","label":"â†³ ë²„íŠ¼ í˜¸ë²„ ë°°ê²½ìƒ‰","default":"#EDE3D8","isVisible":"property.slides[index].showButton === 'on'"},{"type":"COLOR_PICKER","id":"buttonHoverTextColor","label":"â†³ ë²„íŠ¼ í˜¸ë²„ í…ìŠ¤íŠ¸ ìƒ‰ìƒ","default":"#3B2E2A","isVisible":"property.slides[index].showButton === 'on'"},{"type":"RANGE","id":"buttonBorderRadius","label":"â†³ ë²„íŠ¼ ëª¨ì„œë¦¬ ë‘¥ê¸€ê¸°","min":0,"max":100,"step":1,"unit":"px","default":8,"isVisible":"property.slides[index].showButton === 'on'"},{"type":"RANGE","id":"btnPcSize","label":"â†³ ë²„íŠ¼ PC ê¸€ì”¨ í¬ê¸°","min":12,"max":24,"step":1,"unit":"px","default":15,"isVisible":"property.slides[index].showButton === 'on'"},{"type":"RANGE","id":"btnMoSize","label":"â†³ ë²„íŠ¼ ëª¨ë°”ì¼ ê¸€ì”¨ í¬ê¸°","min":12,"max":20,"step":1,"unit":"px","default":14,"isVisible":"property.slides[index].showButton === 'on'"}]},{"type":"TITLE","content":"ğŸ¬ ìŠ¬ë¼ì´ë“œ ì„¤ì •"},{"type":"CHECKBOX","id":"autoplay","label":"ìë™ ì¬ìƒ","default":true},{"type":"RANGE","id":"autoplayInterval","label":"â†³ ìë™ ì¬ìƒ ê°„ê²©","min":1000,"max":10000,"step":500,"unit":"ms","default":4000,"isVisible":"property.autoplay == true"},{"type":"RANGE","id":"transitionDuration","label":"ì „í™˜ ì†ë„","min":300,"max":2000,"step":100,"unit":"ms","default":800},{"type":"TITLE","content":"ğŸ“ ë ˆì´ì•„ì›ƒ"},{"type":"RANGE","id":"desktopHeight","label":"ë°ìŠ¤í¬í†± ë†’ì´","min":50,"max":100,"step":5,"unit":"vh","default":100},{"type":"RANGE","id":"mobileHeight","label":"ëª¨ë°”ì¼ ë†’ì´","min":50,"max":100,"step":5,"unit":"vh","default":100},{"type":"TITLE","content":"âš™ï¸ ì¸ë””ì¼€ì´í„°"},{"type":"COLOR_PICKER","id":"indicatorColor","label":"ì¸ë””ì¼€ì´í„° ìƒ‰ìƒ","default":"#FAF8F5"},{"type":"RANGE","id":"indicatorOpacity","label":"â†³ ì¸ë””ì¼€ì´í„° íˆ¬ëª…ë„","min":0,"max":100,"step":5,"unit":"%","default":40},{"type":"COLOR_PICKER","id":"indicatorActiveColor","label":"í™œì„± ì¸ë””ì¼€ì´í„° ìƒ‰ìƒ","default":"#FAF8F5"},{"type":"RANGE","id":"indicatorHeight","label":"ì¸ë””ì¼€ì´í„° ë‘ê»˜","min":2,"max":8,"step":1,"unit":"px","default":3}],"property":{"autoplay":true,"autoplayInterval":4000,"transitionDuration":800,"desktopHeight":100,"mobileHeight":100,"indicatorColor":"#FAF8F5","indicatorOpacity":40,"indicatorActiveColor":"#FAF8F5","indicatorHeight":3,"slides":[{"mediaType":"image","image":"","video":"","showContent":"on","title":"<h1>ì§„ì‹¬ì˜ ê°€ì¹˜ë¥¼ ë‹´ì€ ë„ìê¸°</h1>","description":"<p>ìê¸°ë‹¤ì›€, ê¹¨ë—í•¨, ì§„ì‹¬ì˜ ê°€ì¹˜ë¥¼ ë‹´ì€ ë„ìê¸°ë¥¼ ë§Œë“¤ë©°<br>ì¼ìƒì˜ ì•„ë¦„ë‹¤ì›€ì„ ì „í•©ë‹ˆë‹¤.</p>","contentPosition":"center","textAlign":"center","textColor":"#FAF8F5","useOverlay":"on","overlayColor":"#3B2E2A","overlayOpacity":30,"showButton":"off","buttonText":"ìì„¸íˆ ë³´ê¸°","buttonLink":{"type":"url","label":"/","value":"/"},"openInNewTab":false,"buttonBgColor":"#FAF8F5","buttonTextColor":"#3B2E2A","buttonHoverBgColor":"#EDE3D8","buttonHoverTextColor":"#3B2E2A","buttonBorderRadius":8,"btnPcSize":15,"btnMoSize":14},{"mediaType":"image","image":"","video":"","showContent":"on","title":"<h1>ìƒˆë¡œìš´ ì œí’ˆ ë¼ì¸ì„ ì†Œê°œí•©ë‹ˆë‹¤</h1>","description":"<p>ë§¤ ìˆœê°„ì„ íŠ¹ë³„í•˜ê²Œ ë§Œë“œëŠ”<br>PerlÃ©aì˜ ë„ìê¸°ì™€ í•¨ê»˜í•˜ì„¸ìš”.</p>","contentPosition":"center","textAlign":"center","textColor":"#FAF8F5","useOverlay":"on","overlayColor":"#3B2E2A","overlayOpacity":30,"showButton":"off","buttonText":"ì»¬ë ‰ì…˜ ë³´ê¸°","buttonLink":{"type":"url","label":"/","value":"/"},"openInNewTab":false,"buttonBgColor":"#FAF8F5","buttonTextColor":"#3B2E2A","buttonHoverBgColor":"#EDE3D8","buttonHoverTextColor":"#3B2E2A","buttonBorderRadius":8,"btnPcSize":15,"btnMoSize":14},{"mediaType":"image","image":"","video":"","showContent":"on","title":"<h1>ìê¸°ë‹¤ìš´ ë„ìê¸°, PerlÃ©a</h1>","description":"<p>ë„ìê¸°ë¥¼ í†µí•´ ìê¸° ì§€í–¥ì  ì‚¶ì„ ì œì•ˆí•©ë‹ˆë‹¤.</p>","contentPosition":"center","textAlign":"center","textColor":"#FAF8F5","useOverlay":"on","overlayColor":"#3B2E2A","overlayOpacity":30,"showButton":"off","buttonText":"ì§€ê¸ˆ ì‹œì‘í•˜ê¸°","buttonLink":{"type":"url","label":"/","value":"/"},"openInNewTab":false,"buttonBgColor":"#FAF8F5","buttonTextColor":"#3B2E2A","buttonHoverBgColor":"#EDE3D8","buttonHoverTextColor":"#3B2E2A","buttonBorderRadius":8,"btnPcSize":15,"btnMoSize":14}]}}
